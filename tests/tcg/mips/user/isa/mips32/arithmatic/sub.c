/*
 * MIPS instruction test case
 *
 *  Copyright (c) 2022 Jiaxun Yang
 *
 * SPDX-License-Identifier: LGPL-2.0-or-later
 */

#include <sys/time.h>
#include <stdint.h>

#include "../../../../include/test_utils_32.h"

int main(void)
{
    int ret = 0;
    int pass_count = 0;
    int fail_count = 0;

    DO_MIPS32_r(sub, 0, 0x00000000, 0x00000000, 0x00000000);
    DO_MIPS32_r(sub, 1, 0x00000001, 0x00000001, 0x00000000);
    DO_MIPS32_r(sub, 2, 0x00000002, 0x00000003, 0xFFFFFFFF);
    DO_MIPS32_r(sub, 3, 0x00000004, 0x00000006, 0xFFFFFFFE);
    DO_MIPS32_r(sub, 4, 0x00000008, 0x0000000C, 0xFFFFFFFC);
    DO_MIPS32_r(sub, 5, 0x00000010, 0x00000018, 0xFFFFFFF8);
    DO_MIPS32_r(sub, 6, 0x00000020, 0x00000030, 0xFFFFFFF0);
    DO_MIPS32_r(sub, 7, 0x00000040, 0x00000060, 0xFFFFFFE0);
    DO_MIPS32_r(sub, 8, 0x00000080, 0x000000C0, 0xFFFFFFC0);
    DO_MIPS32_r(sub, 9, 0x00000100, 0x00000180, 0xFFFFFF80);
    DO_MIPS32_r(sub, 10, 0x00000200, 0x00000300, 0xFFFFFF00);
    DO_MIPS32_r(sub, 11, 0x00000400, 0x00000600, 0xFFFFFE00);
    DO_MIPS32_r(sub, 12, 0x00000800, 0x00000C00, 0xFFFFFC00);
    DO_MIPS32_r(sub, 13, 0x00001000, 0x00001800, 0xFFFFF800);
    DO_MIPS32_r(sub, 14, 0x00002000, 0x00003000, 0xFFFFF000);
    DO_MIPS32_r(sub, 15, 0x00004000, 0x00006000, 0xFFFFE000);
    DO_MIPS32_r(sub, 16, 0x00008000, 0x0000C000, 0xFFFFC000);
    DO_MIPS32_r(sub, 17, 0x00010000, 0x00018000, 0xFFFF8000);
    DO_MIPS32_r(sub, 18, 0x00020000, 0x00030000, 0xFFFF0000);
    DO_MIPS32_r(sub, 19, 0x00040000, 0x00060000, 0xFFFE0000);
    DO_MIPS32_r(sub, 20, 0x00080000, 0x000C0000, 0xFFFC0000);
    DO_MIPS32_r(sub, 21, 0x00100000, 0x00180000, 0xFFF80000);
    DO_MIPS32_r(sub, 22, 0x00200000, 0x00300000, 0xFFF00000);
    DO_MIPS32_r(sub, 23, 0x00400000, 0x00600000, 0xFFE00000);
    DO_MIPS32_r(sub, 24, 0x00800000, 0x00C00000, 0xFFC00000);
    DO_MIPS32_r(sub, 25, 0x01000000, 0x01800000, 0xFF800000);
    DO_MIPS32_r(sub, 26, 0x02000000, 0x03000000, 0xFF000000);
    DO_MIPS32_r(sub, 27, 0x04000000, 0x06000000, 0xFE000000);
    DO_MIPS32_r(sub, 28, 0x08000000, 0x0C000000, 0xFC000000);
    DO_MIPS32_r(sub, 29, 0x10000000, 0x18000000, 0xF8000000);
    DO_MIPS32_r(sub, 30, 0x20000000, 0x30000000, 0xF0000000);
    DO_MIPS32_r(sub, 31, 0x40000000, 0x60000000, 0xE0000000);
    DO_MIPS32_r(sub, 32, 0x80000000, 0xC0000000, 0xC0000000);
    DO_MIPS32_r(sub, 33, 0x00000000, 0x80000000, 0x80000000);
    DO_MIPS32_r(sub, 34, 0x80000001, 0x80000001, 0x00000000);
    DO_MIPS32_r(sub, 35, 0xC0000003, 0x40000002, 0x80000001);
    DO_MIPS32_r(sub, 36, 0xE0000007, 0x20000004, 0xC0000003);
    DO_MIPS32_r(sub, 37, 0xF000000F, 0x10000008, 0xE0000007);
    DO_MIPS32_r(sub, 38, 0xF800001F, 0x08000010, 0xF000000F);
    DO_MIPS32_r(sub, 39, 0xFC00003F, 0x04000020, 0xF800001F);
    DO_MIPS32_r(sub, 40, 0xFE00007F, 0x02000040, 0xFC00003F);
    DO_MIPS32_r(sub, 41, 0xFF0000FF, 0x01000080, 0xFE00007F);
    DO_MIPS32_r(sub, 42, 0xFF8001FF, 0x00800100, 0xFF0000FF);
    DO_MIPS32_r(sub, 43, 0xFFC003FF, 0x00400200, 0xFF8001FF);
    DO_MIPS32_r(sub, 44, 0xFFE007FF, 0x00200400, 0xFFC003FF);
    DO_MIPS32_r(sub, 45, 0xFFF00FFF, 0x00100800, 0xFFE007FF);
    DO_MIPS32_r(sub, 46, 0xFFF81FFF, 0x00081000, 0xFFF00FFF);
    DO_MIPS32_r(sub, 47, 0xFFFC3FFF, 0x00042000, 0xFFF81FFF);
    DO_MIPS32_r(sub, 48, 0xFFFE7FFF, 0x00024000, 0xFFFC3FFF);
    DO_MIPS32_r(sub, 49, 0xFFFFFFFF, 0x00018000, 0xFFFE7FFF);
    DO_MIPS32_r(sub, 50, 0xFFFFFFFF, 0x00000000, 0xFFFFFFFF);
    DO_MIPS32_r(sub, 51, 0xFFFFFFFF, 0x00018000, 0xFFFE7FFF);
    DO_MIPS32_r(sub, 52, 0xFFFE7FFF, 0x0003C000, 0xFFFABFFF);
    DO_MIPS32_r(sub, 53, 0xFFFC3FFF, 0x0007E000, 0xFFF45FFF);
    DO_MIPS32_r(sub, 54, 0xFFF81FFF, 0x000FF000, 0xFFE82FFF);
    DO_MIPS32_r(sub, 55, 0xFFF00FFF, 0x001FF800, 0xFFD017FF);
    DO_MIPS32_r(sub, 56, 0xFFE007FF, 0x003FFC00, 0xFFA00BFF);
    DO_MIPS32_r(sub, 57, 0xFFC003FF, 0x007FFE00, 0xFF4005FF);
    DO_MIPS32_r(sub, 58, 0xFF8001FF, 0x00FFFF00, 0xFE8002FF);
    DO_MIPS32_r(sub, 59, 0xFF0000FF, 0x01FFFF80, 0xFD00017F);
    DO_MIPS32_r(sub, 60, 0xFE00007F, 0x03FFFFC0, 0xFA0000BF);
    DO_MIPS32_r(sub, 61, 0xFC00003F, 0x07FFFFE0, 0xF400005F);
    DO_MIPS32_r(sub, 62, 0xF800001F, 0x0FFFFFF0, 0xE800002F);
    DO_MIPS32_r(sub, 63, 0xF000000F, 0x1FFFFFF8, 0xD0000017);
    DO_MIPS32_r(sub, 64, 0xE0000007, 0x3FFFFFFC, 0xA000000B);
    DO_MIPS32_r(sub, 65, 0xC0000003, 0x7FFFFFFE, 0x40000005);
    DO_MIPS32_r(sub, 66, 0x80000001, 0xFFFFFFFF, 0x80000002);
    DO_MIPS32_r(sub, 67, 0x00000000, 0xFFFFFFFF, 0x00000001);
    DO_MIPS32_r(sub, 68, 0x00000000, 0x55555555, 0xAAAAAAAB);
    DO_MIPS32_r(sub, 69, 0x55555555, 0x55555555, 0x00000000);
    DO_MIPS32_r(sub, 70, 0xAAAAAAAA, 0x15555555, 0x95555555);
    DO_MIPS32_r(sub, 71, 0xFFFFFFFF, 0x55555555, 0xAAAAAAAA);
    DO_MIPS32_r(sub, 72, 0xAAAAAAAA, 0x00000000, 0xAAAAAAAA);
    DO_MIPS32_r(sub, 73, 0xAAAAAAAA, 0x15555555, 0x95555555);
    DO_MIPS32_r(sub, 74, 0xAAAAAAAA, 0xAAAAAAAA, 0x00000000);
    DO_MIPS32_r(sub, 75, 0xAAAAAAAA, 0xFFFFFFFF, 0xAAAAAAAB);

    printf("%s: PASS: %d, FAIL: %d\n", __FILE__, pass_count, fail_count);

    if (fail_count) {
        ret = -1;
    }

    return ret;
}
