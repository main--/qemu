/*
 * MIPS instruction test case
 *
 *  Copyright (c) 2022 Jiaxun Yang
 *
 * SPDX-License-Identifier: LGPL-2.0-or-later
 */

#include <sys/time.h>
#include <stdint.h>

#include "../../../../include/test_utils_32.h"

int main(void)
{
    int ret = 0;
    int pass_count = 0;
    int fail_count = 0;

    DO_MIPS32_r(mul, 0, 0x00000000, 0x00000000, 0x00000000);
    DO_MIPS32_r(mul, 1, 0x00000001, 0x00000001, 0x00000001);
    DO_MIPS32_r(mul, 2, 0x00000002, 0x00000003, 0x00000006);
    DO_MIPS32_r(mul, 3, 0x00000004, 0x00000007, 0x0000001C);
    DO_MIPS32_r(mul, 4, 0x00000008, 0x0000000F, 0x00000078);
    DO_MIPS32_r(mul, 5, 0x00000010, 0x0000001F, 0x000001F0);
    DO_MIPS32_r(mul, 6, 0x00000020, 0x0000003F, 0x000007E0);
    DO_MIPS32_r(mul, 7, 0x00000040, 0x0000007F, 0x00001FC0);
    DO_MIPS32_r(mul, 8, 0x00000080, 0x000000FF, 0x00007F80);
    DO_MIPS32_r(mul, 9, 0x00000100, 0x000001FF, 0x0001FF00);
    DO_MIPS32_r(mul, 10, 0x00000200, 0x000003FF, 0x0007FE00);
    DO_MIPS32_r(mul, 11, 0x00000400, 0x000007FF, 0x001FFC00);
    DO_MIPS32_r(mul, 12, 0x00000800, 0x00000FFF, 0x007FF800);
    DO_MIPS32_r(mul, 13, 0x00001000, 0x00001FFF, 0x01FFF000);
    DO_MIPS32_r(mul, 14, 0x00002000, 0x00003FFF, 0x07FFE000);
    DO_MIPS32_r(mul, 15, 0x00004000, 0x00007FFF, 0x1FFFC000);
    DO_MIPS32_r(mul, 16, 0x00008000, 0x0000FFFF, 0x7FFF8000);
    DO_MIPS32_r(mul, 17, 0x00010000, 0x0001FFFF, 0xFFFF0000);
    DO_MIPS32_r(mul, 18, 0x00020000, 0x0003FFFF, 0xFFFE0000);
    DO_MIPS32_r(mul, 19, 0x00040000, 0x0007FFFF, 0xFFFC0000);
    DO_MIPS32_r(mul, 20, 0x00080000, 0x000FFFFF, 0xFFF80000);
    DO_MIPS32_r(mul, 21, 0x00100000, 0x001FFFFF, 0xFFF00000);
    DO_MIPS32_r(mul, 22, 0x00200000, 0x003FFFFF, 0xFFE00000);
    DO_MIPS32_r(mul, 23, 0x00400000, 0x007FFFFF, 0xFFC00000);
    DO_MIPS32_r(mul, 24, 0x00800000, 0x00FFFFFF, 0xFF800000);
    DO_MIPS32_r(mul, 25, 0x01000000, 0x01FFFFFF, 0xFF000000);
    DO_MIPS32_r(mul, 26, 0x02000000, 0x03FFFFFF, 0xFE000000);
    DO_MIPS32_r(mul, 27, 0x04000000, 0x07FFFFFF, 0xFC000000);
    DO_MIPS32_r(mul, 28, 0x08000000, 0x0FFFFFFF, 0xF8000000);
    DO_MIPS32_r(mul, 29, 0x10000000, 0x1FFFFFFF, 0xF0000000);
    DO_MIPS32_r(mul, 30, 0x20000000, 0x3FFFFFFF, 0xE0000000);
    DO_MIPS32_r(mul, 31, 0x40000000, 0x7FFFFFFF, 0xC0000000);
    DO_MIPS32_r(mul, 32, 0x80000000, 0xFFFFFFFF, 0x80000000);
    DO_MIPS32_r(mul, 33, 0x00000000, 0x55555555, 0x00000000);
    DO_MIPS32_r(mul, 34, 0x55555555, 0x55555555, 0x38E38E39);
    DO_MIPS32_r(mul, 35, 0xAAAAAAAA, 0x55555555, 0x71C71C72);
    DO_MIPS32_r(mul, 36, 0xFFFFFFFF, 0x55555555, 0xAAAAAAAB);
    DO_MIPS32_r(mul, 37, 0xAAAAAAAA, 0x00000000, 0x00000000);
    DO_MIPS32_r(mul, 38, 0xAAAAAAAA, 0x55555555, 0x71C71C72);
    DO_MIPS32_r(mul, 39, 0xAAAAAAAA, 0xAAAAAAAA, 0xE38E38E4);
    DO_MIPS32_r(mul, 40, 0xAAAAAAAA, 0xFFFFFFFF, 0x55555556);
    DO_MIPS32_r(mul, 41, 0x7FFFFFFF, 0x7FFFFFFF, 0x00000001);
    DO_MIPS32_r(mul, 42, 0x7FFFFFFF, 0x80000000, 0x80000000);
    DO_MIPS32_r(mul, 43, 0x7FFFFFFF, 0xFFFFFFFF, 0x80000001);
    DO_MIPS32_r(mul, 44, 0x80000000, 0x7FFFFFFF, 0x80000000);
    DO_MIPS32_r(mul, 45, 0x80000000, 0x80000000, 0x00000000);
    DO_MIPS32_r(mul, 46, 0x80000000, 0xFFFFFFFF, 0x80000000);
    DO_MIPS32_r(mul, 47, 0xFFFFFFFF, 0x7FFFFFFF, 0x80000001);
    DO_MIPS32_r(mul, 48, 0xFFFFFFFF, 0x80000000, 0x80000000);
    DO_MIPS32_r(mul, 49, 0xFFFFFFFF, 0xFFFFFFFF, 0x00000001);

    printf("%s: PASS: %d, FAIL: %d\n", __FILE__, pass_count, fail_count);

    if (fail_count) {
        ret = -1;
    }

    return ret;
}
